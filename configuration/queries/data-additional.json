{
  "size": 3,
  "from": 0,
  "_source": [
    "*"
  ],
  "query": {
    "bool": {
      "filter": [
        {{#if @root.request.params.query.area ~}}
        {{#compare @root.request.params.query.area "scotland" ~}}
        {
          "term": {
            "area": "{{@root.request.params.query.area}}"
          }
        },
        {{/compare ~}}
        {{/if ~}}
        {
          "term": {
            "site": "{{@root.data.currentSite.name}}"
          }
        }
      ],
      "must": [
        {
          "term": {
            "sid": "{{@root.request.params.query.rid}}"
          }
        }
      ]
    }
  }
}

