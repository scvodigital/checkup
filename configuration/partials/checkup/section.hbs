
{{#with (getProperty (getProperty @root.data.checkup (if (compare @root.data.currentSite.name 'skills') (if (compare @root.request.url.pathname '/life') 'lifeskills' else='workskills') else=@root.data.currentSite.name)) section) ~}}
<form action="{{#if (contains @root.request.url.pathname '/life')}}/life{{else}}{{#if (contains @root.request.url.pathname '/work')}}/work{{else}}/checkup{{/if}}{{/if}}/{{next_section}}" method="post" class="checkup-section" id="checkup-{{../section}}">
<form action="/checkup/{{next_section}}" method="post" class="checkup-section" id="checkup-{{../section}}">
  {{> checkup_answers section=@root.request.body.answer-section}}
  <input type="hidden" name="answer-section" value="{{../section}}" />
  <div class="checkup-section-header-container">
    <div class="checkup-section-header header-{{#if color}}{{color}}{{else}}primary{{/if}}">
      <div class="container-fluid">
        <div class="container-content v-padding-full">
          <div class="mdc-layout-grid v-padding-full">
            <div class="mdc-layout-grid__inner">
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-1-desktop mdc-layout-grid__cell--span-2-tablet mdc-layout-grid__cell--span-1-phone" style="display:flex;align-items:center;">
                {{#ifAll icon title ~}}
                  {{#if (contains icon 'fa-')}}
                    <span class="far {{icon}} fa-4x fa-fw"></span>
                  {{else}}
                    <img src="{{~>asset_url url=(concat 'images/icon-' icon '@2x.png')~}}" title="{{title}}" class="icon" />
                  {{/if}}
                {{/ifAll ~}}
              </div>
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-11-desktop mdc-layout-grid__cell--span-6-tablet mdc-layout-grid__cell--span-3-phone">
                {{#if name ~}}
                <div class="mdc-typography--body2">{{{name}}}</div>
                {{/if ~}}
                {{#if title ~}}
                <h1 class="mdc-typography--headline3">{{{title}}}</h1>
                {{/if ~}}
                {{#if description ~}}
                <div class="mdc-typography--body1">{{{description}}}</div>
                {{/if ~}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="bg-grey-light b-padding-full">
    <div class="container-fluid">
      {{#if progress ~}}
      {{> checkup_progress progress=progress}}
      {{/if ~}}
      <div class="container-content v-padding-full">
        <div class="mdc-typography--body2">
          * required information
        </div>
        {{#each questions ~}}
        <div class="question-block mdc-elevation--z3">
          <div class="question">
            {{#if title ~}}
            <h2 class="mdc-typography--headline5 question-title">{{{title}}}</h2>
            {{/if ~}}
            {{#if description ~}}
            <div class="mdc-typography--body1 question-description">{{{description}}}</div>
            {{/if ~}}
          </div>
          {{#ifAny (compare type "select-one") (compare type "select-many") ~}}
            <ul class="answer-block">
              {{#each options ~}}
              {{#switch ../type ~}}
              {{#case "select-one" ~}}
              {{#if answer ~}}
              <li class="answer">{{> components_radio_button supplementor=../value supplements=../supplements target=answer label=answer id=(slugify (concat answer ../value)) name=(concat "answers-" ../../../section "-" ../value) value=value required="true"}}</li>
              {{/if ~}}
              {{/case ~}}
              {{#case "select-many" ~}}
              {{#if answer ~}}
              <li class="answer">{{> components_checkbox supplementor=../value supplements=../supplements target=answer label=answer id=(slugify (concat answer ../value)) name=(concat "answers-" ../../../section "-" ../value) value=value}}</li>
              {{/if ~}}
              {{/case ~}}
              {{/switch ~}}
              {{/each ~}}
              {{!-- Supplementary options --}}
              {{#if supplementary-options}}
              <div class="hidden" data-container-of="{{slugify value}}">
                {{#each supplementary-options}}
                  {{#each this}}
                  <li class="answer" data-supplement-of={{slugify ../../value}} data-supplement="{{@../this.key}}" >{{> components_checkbox supplement=@../this.key supplement-of=(slugify ../../value) label=answer name=(concat "answers-" ../../../../section "-" ../../value "-supplement") value=value}}</li>
                  {{/each}}
                {{/each}}
              </div>
              {{/if}}
            </ul>
          {{/ifAny ~}}
          {{#if (compare type "select-grid") ~}}
            <table>
              {{#each options}}
              <tr>
                <td>
                  {{answer}}
                </td>
                {{#each ../answer-options}}
                  <td>
                    {{> components_radio_button label=answer id=(slugify (concat ../answer "-" answer)) name=(concat "answers-" ../../../../section "-" ../../value "-" (slugify ../answer)) value=(default value answer) required="true"}}
                  </td>
                {{/each}}
              </tr>
              {{/each}}
            </table>
          {{/if}}
          {{#if (compare type "select-dropdown") ~}}
                         <ul class="answer-block">
               <li >
                <select {{#if supplements}}data-supplementor="{{slugify value}}"{{/if}} id="{{concat 'answers-' ../../section '-' (slugify value)}}" name="{{concat 'answers-' ../../section '-' value}}">
                  <option disabled selected value> -- select an option -- </option>
                  {{#each options}}
                  <option  data-supplement-target="{{answer}}" value="{{default value answer}}">{{answer}}</option>
                  {{/each}}
                </select>
              </li>
            {{!-- Supplementary options --}}
              {{#if supplementary-options}}
              <li class="hidden" data-container-of="{{slugify value}}">
              {{#each supplementary-options}}
                <select class="hidden" data-supplement={{@key}} data-supplement-of={{slugify ../value}}
                name="{{concat 'answers-' ../../../section '-' ../value '-supplement'}}">
                  <option disabled selected value> -- select an option -- </option>
                {{#each this}}
                  <option value="{{default value answer}}">{{answer}}</option>
                {{/each}}
                </select>
              {{/each}}
              </li>
              {{/if}}
              </ul>
          {{/if}}

          {{#compare type "freetext" ~}}
            <div class="answer-block">
              <div class="mdc-text-field mdc-text-field--textarea mdc-text-field--fullwidth" data-mdc-auto-init="MDCTextField">
                <textarea id="{{slugify title}}" name="answers-{{../../section}}-{{value}}" class="mdc-text-field__input" rows="5" placeholder="{{placeholder}}" maxlength="32767"></textarea>
                <label for="{{slugify title}}" class="mdc-floating-label"></label>
              </div>
            </div>
          {{/compare ~}}
          {{#ifAny (compare type "measurement-foundation") (compare type "measurement-eds") ~}}
            <ul class="answer-block">
              {{#each (split "I can do this,I can partially do this,I can't do this" ",")}}
                <li class="answer" id="option-{{slugify (concat ../value '-' this)}}"{{#compare ../type "measurement-eds"}} onclick="{{#compare this 'I can do this'}}hide{{else}}show{{/compare}}Options('{{../value}}');"{{/compare}}>{{> components_radio_button label=this id=(slugify (concat this ../value)) name=(concat "answers-" ../../../section "-" ../value) value=value required="true"}}</li>
              {{/each}}
              {{#compare type "measurement-eds"}}
                {{#each (split "Iâ€™d like to learn how to do this,I have no interest in this" ",")}}
                  <li class="answer hidden option-eds-{{../value}}" id="option-{{slugify (concat ../value '-' this)}}">{{> components_checkbox label=this id=(slugify (concat this ../value)) name=(concat "answers-" ../../../section "-" ../value) value=value}}</li>
                {{/each}}
              {{/compare}}
            </ul>
          {{/ifAny ~}}
        </div>
        {{/each ~}}
        <script>
        function showOptions(question) {
          $(".option-eds-"+question).removeClass('hidden');
        }
        function hideOptions(question) {
          $(".option-eds-"+question).addClass('hidden').find('.mdc-form-field').removeClass('checked');
        }
        </script>
        <div class="cta b-padding-full">
          <button type="submit" class="mdc-button mdc-button--raised">Next section</button>
        </div>
      </div>
    </div>
  </div>
</form>
{{/with ~}}